[["index.html", "CUG水文气象学 前言 bookdown Typora pandoc：md转word或pdf 作者简介 参考文献", " CUG水文气象学 孔冬冬 2022-05-09 前言 bookdown 本书采用bookdown + GitHub action自动渲染成网页。其实也可以采用Typora本地查看，排版与网页版基本一致。 bookdown编译 编译为静态预览。编译之后Rmd做的修改，不会立即同步。 bookdown::render_book() 如需编译pdf（bookdown::pdf_book），需要安装XeLaTeX。建议使用TinyTeX：https://yihui.org/tinytex/。 bookdown预览 预览为动览。编译之后Rmd做的修改，会立即同步更新。 bookdown::serve_book() # servr::daemon_stop(1) # to stop render bookdown使用心得 Rmd文件名的排序决定了编译顺序。建议Rmd在命名时需要考虑文件排序。 R包加载一次即可。index.Rmd是最先被编译的Rmd文件，因此常用的R包可以在index.Rmd中加载。 Rmd在编译过程中无权限安装R包，因此require2无法实现其原本设计的功能。 Typora 安装typora v0.11.18。 typora v1.0之前免费；之后转为收费。可以在网上搜到免费版的v0.11.18。 Rmd默认采用typora打开； Rmd打开之后看到的就是排版好的文档，与bookdown生成的网页基本一致。 pandoc：md转word或pdf 下载pandoc和pandoc-crossref，二者的版本要对应起来，否则编译会出错。 pandoc: https://github.com/jgm/pandoc/releases pandoc-crossref: https://github.com/lierdakil/pandoc-crossref/releases 在markdown文件中： $$ \\begin{align} \\frac{\\partial \\rho}{\\partial t}+\\nabla \\cdot (\\rho \\vec{V}) &amp;= 0 \\\\ (\\frac{\\partial \\rho}{\\partial t} + \\vec{V} \\nabla \\cdot \\rho) + \\rho \\nabla\\cdot\\vec{V} &amp;=0 \\end{align} $$ {#eq:description} \\[ \\begin{align} \\frac{\\partial \\rho}{\\partial t}+\\nabla \\cdot (\\rho \\vec{V}) &amp;= 0 \\\\ (\\frac{\\partial \\rho}{\\partial t} + \\vec{V} \\nabla \\cdot \\rho) + \\rho \\nabla\\cdot\\vec{V} &amp;=0 \\end{align} \\] {#eq:description} 注意： bookdown给公式编号的方式与latex不同。bookdown中，上述公式的代码应该改为： $$ \\begin{align} \\frac{\\partial \\rho}{\\partial t}+\\nabla \\cdot (\\rho \\vec{V}) &amp;= 0 \\\\ (\\frac{\\partial \\rho}{\\partial t} + \\vec{V} \\nabla \\cdot \\rho) + \\rho \\nabla\\cdot\\vec{V} &amp;=0 (\\#eq:description) \\end{align} $$ \\[ \\begin{align} \\frac{\\partial \\rho}{\\partial t}+\\nabla \\cdot (\\rho \\vec{V}) &amp;= 0 \\\\ (\\frac{\\partial \\rho}{\\partial t} + \\vec{V} \\nabla \\cdot \\rho) + \\rho \\nabla\\cdot\\vec{V} &amp;=0 \\end{align} \\tag{0.1} \\] 在命令行中： ## powershell # word pandoc .\\00-前言.Rmd --reference-doc=inst\\numbered-sections.docx ` --filter pandoc-crossref --css .\\inst\\base.user.css -o hello.docx; .\\hello.docx # pdf pandoc .\\00-前言.Rmd -f markdown --reference-doc=inst\\numbered-sections.docx ` --filter pandoc-crossref --css .\\inst\\base.user.css -o hello.pdf; .\\hello.pdf 作者简介 孔冬冬，自然地理学博士，中国地质大学（武汉）副教授。 参考文献 Xie Yihui (2022), Books and Technical Documents with R Markdown, https://bookdown.org/yihui/bookdown 李东风 (2022), R语言教程, 北京大学《统计软件》, https://www.math.pku.edu.cn/teachers/lidf/docs/Rbook/html/_Rbook/bookdown.html 王敏杰 (2022), 数据科学中的R语言, 四川师范大学研究生公选课, https://bookdown.org/wangminjie/R4DS/baseR-intro-ds.html, https://github.com/perlatex/R_for_Data_Science "],["旋转大气运动的基本方程.html", "Chapter 1 1.2 旋转大气运动的基本方程 1.1 专业名词 1.2 四大定律", " Chapter 1 1.2 旋转大气运动的基本方程 1.1 专业名词 惯性坐标系：上帝视角 旋转坐标系：人类视角，随地球一块转动 1.2 四大定律 1.2.1 牛顿第二定律 \\[ (\\frac{d V_a}{d t})_{a}=\\vec{g}_{m} -\\frac{1}{\\rho}\\nabla p_{a} + \\vec{F}_{a} \\] \\(\\vec{g}_{m}\\)：重力 \\(-\\frac{1}{\\rho}\\nabla p_{a}\\)：气压梯度力 \\(\\vec{F}_{a}\\)：摩擦力，\\(\\vec{F}_{a} \\equiv \\gamma \\nabla^{2} \\vec{V}_{a}+\\frac{\\gamma}{3} \\nabla\\left(\\nabla \\cdot \\vec{V}_{a}\\right)\\) 1.2.2 质量守恒定律 \\[ \\left(\\frac{\\partial \\rho}{\\partial t}\\right)_{a}+(\\nabla \\cdot \\rho \\vec{V}_a)_{a}=0 \\] 拉格朗日观点：以移动的体积元为研究对象 \\[ (\\frac{d \\rho}{\\partial t})_{a}+\\rho \\nabla \\cdot \\vec{V}_{a}=0 \\] 欧拉观点：以固定空间为研究对象 \\[ \\left(\\frac{\\partial \\rho}{\\partial t}\\right)_{a}+(\\nabla \\cdot \\rho \\vec{V}_a)_{a}=0 \\] 拉格朗日观点和欧拉观点是同一事物的两种不同描述。证明： \\[ \\begin{align} \\frac{\\partial \\rho}{\\partial t}+\\nabla \\cdot (\\rho \\vec{V}) &amp;=0 \\\\\\\\ (\\frac{\\partial \\rho}{\\partial t} + \\vec{V} \\nabla \\cdot \\rho) + \\rho \\nabla\\cdot\\vec{V} &amp;=0 \\notag \\\\\\\\ \\frac{d \\rho}{\\partial t} +\\rho \\nabla \\cdot \\vec{V} &amp;=0 \\notag \\end{align} \\] 其中，\\(\\nabla\\cdot\\)：是求梯度的符号 详细证明过程见 葛朝霞, 2013, 章节4.7, P103 1.2.3 理想气体定律 \\[ p=\\rho R T \\\\ p \\alpha =R T \\] \\(R\\)：为比气体常数（\\(J · g^{-1}K^{-1}\\)），\\(R=R^*/M\\)。\\(R^*\\)为摩尔气体常数，\\(R^*=8.314 J · mol ^{-1}K^{-1}\\)；\\(M\\)的气体相对分子质量(\\(g ·mol^{-1}\\))；\\(\\alpha\\)为比容，单位质量气体具有的体积。对于干空气，\\(Rd = R^* / M_d = 8.314 / 28.97 = 0.287\\;(J ·g^{-1}K^{-1})\\) \\[ \\alpha dp+pd\\alpha=RdT \\] "],["大气热力学.html", "Chapter 2 大气热力学 2.1 热力学第一定律 2.2 绝热过程", " Chapter 2 大气热力学 2.1 热力学第一定律 热力学第一定律：对系统施加的热量等于系统的内能变化和对系统对外做功之和。 对式6，两边同时求微分，可得： \\[ dQ = C_v dT + p d\\alpha \\\\ \\dot{Q} = C_{v} \\frac{d T}{d t} + p \\frac{d \\alpha}{d t} \\] 距离或者体积\\(\\alpha\\)不变，则不存在做功，因此上式不包含 \\(\\alpha dp\\)。 2.1.1 定容与定压比热容 定容(\\(d \\alpha = 0\\))，热量全部转化为内能，\\(dQ = C_v dT\\)； 定压(\\(d p = 0\\))，一部分能量对外做功。此时： \\[ \\begin{align} dQ &amp;= C_v dT + p d\\alpha \\\\ &amp;= C_v dT + RdT - \\alpha dp \\notag, (dp=0) \\\\ &amp;= C_v dT + RdT \\notag \\\\ &amp;= C_p dT \\notag \\end{align} \\] 因此\\(C_p = C_v + R\\)。 其中，\\(C_{v}\\)、\\(C_p\\)分为定容、定压比热容，对于干空气，\\(C_{v}=0.716 J ·g^{-1} K^{-1}\\)、\\(C_p=1.005 J ·g^{-1} K^{-1}\\)。 2.2 绝热过程 2.2.1 干空气 在dp不为0情况下，将\\(\\alpha=\\frac{RT}{p}\\)带入： \\[ \\begin{align} dQ &amp;= C_v dT + p d\\alpha \\\\ &amp;= C_v dT + RdT - \\alpha dp \\notag \\\\ &amp;= C_p dT - \\alpha dp \\notag \\\\ &amp;= C_p dT - \\frac{RT}{p}dp \\notag \\end{align} \\] 即： \\[ dQ= C_p dT - \\frac{RT}{p}dp \\] 2.2.1.1 绝热情况下： $$ C_p dT = dp \\ C_p {T} = R {p} \\ C_p {T{0}}^{T} ={p{0}}^{p} R \\ ln = ln ( [] ^{R/C_p}) $$ 因此可得： \\[ T = T_0 * (\\frac{p}{p_0}) ^{R/C_p} \\] 上式等价于： \\[ T_0 = T * (\\frac{p_0}{p}) ^{R/C_p} \\] 定义1000hpa处的温度为位温\\(\\theta\\)，则 \\[ \\theta = T * (\\frac{p_0}{p}) ^{R/C_p} \\\\ = T * (\\frac{1000}{p}) ^ {0.288} \\] \\[ \\begin{align} ln \\theta &amp;= ln T + \\frac{R}{C_p} ln(\\frac{p_0}{p}) \\\\ &amp;= ln T - \\frac{R}{C_p} ln p + \\frac{R}{C_p} ln(p_0) \\\\ &amp;= ln T - \\frac{R}{C_p} ln p + const \\end{align} \\] 根据上式可以得到： \\[ d {ln(\\theta)} = \\frac{d\\theta}\\theta = C_p \\frac{dT}{T} - \\frac{R}{C_p} \\frac{dp}{p} \\] 2.2.2 湿空气 与干空气相比，湿空气多了凝结释放的潜热。 气化潜热：单位质量的液体，气化所需要的热量；用符号\\(\\lambda\\)表示。随温度变化而变化，但变化幅度不大，因此有时认为\\(\\lambda\\)为常数。 凝结潜热: 单位质量的气体，凝结所释放的热量。 气化与凝结互为反过程。 气化潜热的公式如下： \\[ \\lambda =2499.5-2.39T, \\;(J·g^{-1}) \\] 湿空气达到饱和后，有部分水汽会发生凝结。凝结过程中，水汽含量下降，\\(d{q_s}&lt;0\\)，因此乘以\\(-\\lambda\\)表示释放的能量。 \\[ \\begin{align} dQ - \\lambda d{q_s} &amp;= C_p dT - \\frac{RT}{p}dp \\end{align} \\] 2.2.2.1 绝热过程中 \\(dQ = 0\\) \\[ - \\lambda d{q_s} = C_p dT - \\frac{RT}{p}dp \\\\ - \\frac{\\lambda d{q_s}}{T} = C_p \\frac{dT}{T} - R\\frac{dp}{p} \\\\ - \\frac{\\lambda d{q_s}}{C_p T} = \\frac{d\\theta}\\theta \\] \\[ \\theta=T\\left(\\frac{p_{0}}{1000}\\right)^{\\frac{R}{c_{p}}} e^{\\frac{\\lambda\\left(q-q_{0}\\right)}{c_{p}}} \\] "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
